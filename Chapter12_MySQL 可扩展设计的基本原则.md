# MySQL 可扩展设计的基本原则

1. 什么是可扩展性

    Scale（扩展）就是让我们的数据库能够提供更强的服务能力，更强的处理能力。

    而Scalable（可扩展）则是表明数据库系统在通过相应升级（包括增加单机处理能力或者增加服务器数量）之后能够达到提供更强处理能力

    Scalability（扩展性）则是指一个数据库系统通过相应的升级之后所带来处理能力提升的难易程度


    一个数据库据系统的扩展性实际上是主要体现在两个方面，一个是横向扩展，另一个则是纵向扩展，也就是我们常说的Scale Out 和Scale Up。

    * Scale Out 就是指横向的扩展，向外扩展，也就是通过增加处理节点的方式来提高整体处理能力，说的更实际一点就是通过增加机器来增加整体的处理能力。

        * 优点

            1. 成本低

            2. 不太容易遇到瓶颈

            3. 单个节点故障对系统整体影响较小

        * 缺点

            1. 处理节点多，造成系统架构整体复杂度提高，应用程序复杂度提高

            2. 集群维护难以程度更高，维护成本更大；

    * Scale Up 则是指纵向的扩展，向上扩展，也就是通过增加当前处理节点的处理能力来提高整体的处理能力，说白了就是通过升级现有服务器的配置，如增加内存，增加CPU，增加存储系统的硬件配置，或者是直接更换为处理能力更强的服务器和更为高端的存储系统。

        * 优点

            1. 处理节点少，维护相对简单

            2. 所有数据都集中在一起，应用系统架构简单，开发相对容易；

        * 缺点

            1. 高端设备成本高，且竞争少，容易受到厂家限制；

            2. 受到硬件设备发展速度限制，单台主机的处理能力总是有极限的，容易遇到最终无法解决的性能瓶颈；

            3. 设备和数据集中，发生故障后的影响较大；

2. 事务相关性最小化原则

    分布式事务本身就是一个非常复杂的机制，不管是商业的大型数据库系统还是各开源数据库系统，虽然大多数数据库厂家基本上都实现了这个功能，但或多或少都存在各种各样的限制。而且也存在一些Bug，可能造成某些事务并不能很好的保证，或者是不能顺利的完成。

    1. 进行Scale Out 设计的时候合理设计切分规则，尽可能保证事务所需数据在同一个MySQL Server 上，避免分布式事务。

    2. 大事务切分成多个小事务，数据库保证各个小事务的完整性，应用控制各个小事务之间的整体事务完整性。

    3. 结合上述两种解决方案，整合各自的优势，避免各自的弊端。

    ，我们还需要明白一个观点，那就是事务并不是越多越好，而是越少越好越小越好。不论我们使用何种解决方案，那就是在我们设计应用程序的时候，都需要尽可能做到让数据的事务相关性更小，甚至是不需要事务相关性。当然，这只是相对的，也肯定只有部分数据能够做到。但可能就是某部分数据做到了无事务相关性之后，系统整体复杂度就会降低很大一个层次，应用程序和数据库系统两方面都可能少付出很多的代价

3. 数据一致性原则

    数据一致性的保证就像事务完整性一样，在我们对系统进行Scale Out 设计的时候，也可能会遇到一些问题。当然，如果是Scale Up，可能就很少会遇到这类麻烦了。

    BASE 模型。即：基本可用，柔性状态，基本一致和最终一致。大家可以简单的理解为非实时的一致性原则

    需要解决的问题：

    1. 如何来确定哪些数据需要实时一致哪些数据又只需要非实时的最终一致. 

    2. 如何让系统中的不一致数据达到最终一致

    3. 避免实时一致与最终一致两类数据的前台在线交互

4. 高可用及数据安全原则

    我们必须通过各种技术手段来保证系统的可用性不会降低，甚至在整体上有所提高

    要确保高可用及数据安全原则，最好的办法就是通过冗余机制来保证。所有软硬件设备都去除单点隐患，所有数据都存在多份拷贝。这样才能够较好的确保这一原则。在技术方面,我们可以通过MySQL Replication，MySQL Cluster 等技术来实现


